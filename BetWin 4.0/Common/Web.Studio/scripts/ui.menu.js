window.UI||(window.UI={});
(function(c){UI.Menu=new Class({Implements:[Events,Options],options:{menu:null,fade:!0,overCssName:null,x:0,y:0,width:"auto",delay:100,event:"mouseenter",zIndex:0,align:null},show:null,hide:null,initialize:function(a,b){this.setOptions(b);this.element=a=$(a);this.options.menu=$(this.options.menu);this.options.menu.setStyles({visibility:"hidden"});0<this.options.zIndex&&this.options.menu.setStyle("z-index",this.options.zIndex);switch(this.options.width){case "none":case null:break;case 0:this.options.menu.setStyle("width",
this.element.getSize().x);break;default:this.options.menu.setStyle("width",this.options.width)}switch(this.options.align){case "left":this.options.x=0;break;case "center":this.options.x=(this.options.menu.getSize().x-a.getSize().x)/-2;break;case "right":this.options.x=-1*(this.options.menu.getSize().x-a.getSize().x)}a.addEvent(this.options.event,this.onMenuShow.bind(this,"main"));a.addEvent("mouseleave",this.onMenuHide.bind(this,"main"));this.options.menu.addEvents({mouseenter:this.onMenuShow.bind(this,
"menu"),mouseleave:this.onMenuHide.bind(this,"menu")})},onMenuShow:function(a){"main"==a&&(this.options.menu.setStyle("visibility","visible"),"none"!=this.options.x&&null!=this.options.x&&this.options.menu.setStyle("left",this.element.getLeft()+this.options.x),"none"!=this.options.y&&null!=this.options.y&&this.options.menu.setStyle("top",this.element.getTop()+this.element.getSize().y+this.options.y),this.options.fade?(this.options.menu.fade("hide"),this.options.menu.fade("in")):this.options.menu.fade("show"),
this.fireEvent("show"));this.element.store("over",!0);null!=this.options.overCssName&&this.element.addClass(this.options.overCssName)},onMenuHide:function(a){void 0!=a&&(a=a.toString());switch(a){case "main":this.element.store("over",!1);this.onMenuHide.delay(this.options.delay,this);break;case "menu":this.element.store("over",!1);this.onMenuHide.bind(this).apply();break;default:if(this.element.retrieve("over",!1))break;this.options.menu.fade(this.options.fade?"out":"hide");this.fireEvent("hide");
null!=this.options.overCssName&&this.element.removeClass(this.options.overCssName)}}})})(UI);